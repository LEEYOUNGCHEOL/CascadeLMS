<%= error_messages_for 'assignment' %>
<%= error_messages_for 'quiz' %>

<div class="blockintro">Create a new quiz for this course.</div>

<div class="block">
<p><label for="assignment[title]" class="required">Quiz name:</label>
<%= text_field 'assignment', 'title'  %></p>
<p><label for="term" class="required">Category:</label> <%= select_tag 'grade_category_id', options_from_collection_for_select(@categories, "id", "category", @assignment.grade_category_id ) %></p>
</div>

<div class="blockintro">For the dates of a quiz: the available date allows to set up an quiz in this system without allowing students to see it until a certain point in time.  The due date and the close date allow you to set a time that the quiz is due, but still allow it to be taken for a slightly longer period of time.</div>
<div class="block">

<table border="0" cellspacing="2" cellpadding="2">
 <tr>
  <td align="right" class="required"><b>Date available to students:</b></td>
  <td align="left" nowrap="nowrap"><%= datetime_select 'assignment', 'open_date'  %></td>
 </tr>
 <tr>
  <td align="right" class="required"><b>Quiz due date:</b></td>
  <td align="left" nowrap="nowrap"><%= datetime_select 'assignment', 'due_date'  %></td>
 </tr>
 <tr>
  <td align="right" class="required"><b>Last time the quiz can be taken (close date):</b></td>
  <td align="left" nowrap="nowrap"><%= datetime_select 'assignment', 'close_date'  %></td>
 </tr>
</table>

    <p><label for="assignment[description]" class="required">Quiz Description (optional):</label>
      <%= text_area 'assignment', 'description', :rows => '5', :cols => '60'  %></p>

  </div>

<% quiz_style = 'display: block;'
   survey_style = 'display: none;'
   if @quiz.survey
	 t = quiz_style
	 quiz_style = survey_style
	 survey_style = t
   end
%>

<div class="blockintro">A quiz can be a traditional kind of online quiz, or can be a survey.  Surveys are not assigned a point value by default, although an instructor can do this manually.</div>
<div class="block">
  <p><label for="survey" class="required">Quiz or Survey:</label>
	<% if edit_mode %>
	   <% if @quiz.survey %>
	      <%= radio_button 'quiz', 'survey', true %> Survey
	   <% else %>
	      <%= radio_button 'quiz', 'survey', false %> Quiz
	   <% end %>
	   <br/><b><i>Once created - you cannot change between a quiz and a survey.</i></b>
	<% else %>
	  <%= radio_button 'quiz', 'survey', false, :onclick => 'new Effect.Puff("survey_settings");new Effect.SlideDown("quiz_settings")' %> Quiz
	  <%= radio_button 'quiz', 'survey', true, :onclick => 'new Effect.Puff("quiz_settings");new Effect.SlideDown("survey_settings")' %> Survey
	<% end %>
	</p>
</div>

<div id="quiz_settings" style="<%=quiz_style%>" >

	<div class="blockintro">Enter the number of attempts that a student may have for this quiz - enter a negative number to allow for unlimited attempts (default).</div>
	<div class="block">
		<p><label for="quiz[attempt_maximum]" class="required">Quiz Attempts:</label>
	      <%= text_field 'quiz', 'attempt_maximum'  %></p>
	</div>

	<div class="blockintro">Randomizing a quiz allow you to display the questions to a student in random order, and also to display to them a random subset of the questions.   Individual questions can be weighted to cause them to appear more frequently.</div>
	<div class="block">
		<p><label for="quiz[random_questions]" class="required">Randomize Questions:</label>
	       <%= radio_button 'quiz', 'random_questions', true %> Yes
		   <%= radio_button 'quiz', 'random_questions', false %> No</p>
	</div>

	<% if @new_quiz && !edit_mode %>
	<div class="blockintro">If you enter a point value, a GradeBook item will be created and associated with this quiz.  All questions will be weighted equally.  Quizzes that do not have any free form text response questions will be automatically scored.</div>
	<div class="block">
	<p><label for="point_value" class="required">Points:</label>
	  <%= text_field_tag 'point_value', @points  %></p>
	</div>
	<% end %>
</div>

<div id="survey_settings" style="<%=survey_style%>">
  <% if @course.course_setting.enable_outcomes %>	
    <p class="blockintro">If this is an entry/exit survey based on the course outcomes, then you might want to make it available to accreditation auditors.   You can also automatically generate a standard entry/exit survey based on the already defined course outcomes.</p>
    <div class="block">
      <label for="quiz[available_to_auditors]" class="required">Available to Auditors:</label>
	    <p><%= radio_button 'quiz', 'available_to_auditors', true %> Yes
	    <%= radio_button 'quiz', 'available_to_auditors', false %> No</p>

     <% if request.path_parameters['action'].eql?('new') %>
      <label for="generate_survey">Automatically Generate Entry/Exit survey:</label>
        <p><%= check_box_tag "generate_survey", 1, false %></p>		
     <% end %>
    </div>

  <% else %>
    <div class="GoodMessage">
		<p><b>You will continue your survey configuration on the next screen.</b></p>
	</div>
  <% end %>
</div>
 